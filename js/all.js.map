{"version":3,"sources":["js/all.js"],"names":["place","document","getElementById","title","querySelector","detail","str","map","position","mapSpot","zoneData","zoneStr","zoneLen","length","sort","i","innerHTML","addEventListener","filter","e","preventDefault","value","textContent","getData","xhr","XMLHttpRequest","open","send","onload","a","JSON","parse","responseText","len","CaseLocationDistrict","CaseTime","slice","CaseDescription","Wgs84X","Wgs84Y","$","ready","click","dataset","site","initMap","addClass","removeClass","latNum","parseFloat","lat","lngNum","lng","google","maps","Map","zoom","center","marker","Marker"],"mappings":"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","file":"all.js","sourcesContent":["var place = document.getElementById('zone');\nvar title = document.querySelector('.place-name');\nvar detail = document.querySelector('.detail');\nvar str=\"\";\nvar map;\nvar position={};\nvar mapSpot = document.querySelector('.spot');\n\n\n//selector資料\nvar zoneData=[\" 全區\",\"中正區\",\"大同區\",\"中山區\",\"松山區\",\"大安區\",\"萬華區\",\"信義區\",\"士林區\",\"北投區\",\"內湖區\",\"南港區\",\"文山區\"];\nvar zoneStr=\"\";\nvar zoneLen=zoneData.length;\n    zoneData.sort();\n    for(let i = 0;i<zoneLen;i++){\n        if(i==0){\n            zoneStr='<option value=\"'+zoneData[i]+'\" disabled selected>- - 請選擇行政區- -</option>' \n        }\n        zoneStr+='<option value=\"'+zoneData[i]+'\">'+zoneData[i]+'</option>';\n    }\n        place.innerHTML=zoneStr;\n\n\n//監聽selector\nplace.addEventListener('change',filter,false);\n\n//selector事件\nfunction filter(e){\n    e.preventDefault();\n    str = place.value;\n    title.textContent=str;\n    detail.innerHTML=\"\";\n    getData();\n}\n\n//向伺服器要資料、readyState=4後顯示在網頁上\nfunction getData(){\n        var xhr =  new XMLHttpRequest();\n        xhr.open('get','https://next.json-generator.com/api/json/get/Ek86hdRMr',true);\n        xhr.send(null);\n        xhr.onload=function(){   //readyState=4後觸發\n            var a=JSON.parse(xhr.responseText);\n            var len = a.length;\n            for(let i = 0;i<len;i++){\n                if(a[i].CaseLocationDistrict==str){\n                detail.innerHTML+=`<tr>\n                <th class=\"time\" >${a[i].CaseTime.slice(0,10)}</th>\n                <th class=\"zone\" >${a[i].CaseLocationDistrict}</th>\n                <th class=\"descrip\">${a[i].CaseDescription}</th>\n                <th class=\"place\"><a href=\"#\" class=\"btn btn-sm btn-primary m-2 google-map\" data-site='{\"lng\":${a[i].Wgs84X},\"lat\":${a[i].Wgs84Y}}'>Map</a></th>   \n            </tr>`;\n            }else if(str==\" 全區\"){\n                detail.innerHTML+=`<tr>\n                    <th class=\"time\" >${a[i].CaseTime.slice(0,10)}</th>\n                    <th class=\"zone\" >${a[i].CaseLocationDistrict}</th>\n                    <th class=\"descrip\">${a[i].CaseDescription}</th>\n                    <th class=\"place\"><a href=\"#\" class=\"btn btn-sm btn-primary m-2 google-map\" data-site='{\"lng\":${a[i].Wgs84X},\"lat\":${a[i].Wgs84Y}}'>Map</a></th>   \n                </tr>`;\n                // ${a[i].CaseLocationDescription}\n            }\n        }\n        $(document).ready(function () {\n            $('.google-map').click(function (e) { \n                e.preventDefault();\n                position=JSON.parse(this.dataset.site);\n                initMap();\n                $('.one-page').addClass('d-none');\n                $('.two-page').removeClass('d-none');\n            }); \n            $('.home-link').click(function (e) { \n                e.preventDefault();\n                $('.two-page').addClass('d-none');\n                $('.one-page').removeClass('d-none');\n            });\n        });\n    }\n}\n\n\n\nfunction initMap() {\n    let latNum = parseFloat(position.lat);\n    let lngNum = parseFloat(position.lng);\n    \n    map = new google.maps.Map(document.getElementById('map'), {\n      zoom: 18,\n      center: {\"lat\":latNum,\"lng\":lngNum}\n    });\n    \n    var marker = new google.maps.Marker({\n      position: {\"lat\":latNum, \"lng\":lngNum},\n      map: map,\n      title:'案發現場',\n    });\n  }\n  "]}